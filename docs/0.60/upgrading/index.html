<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>更新 · React Native 中文网</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="##### 本文档贡献者：[sunnylqm](https://github.com/search?q=sunnylqm%40qq.com+in%3Aemail&amp;type=Users)(100.00%)"/><meta name="docsearch:version" content="0.60"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="更新 · React Native 中文网"/><meta property="og:type" content="website"/><meta property="og:url" content="undefined/"/><meta property="og:description" content="##### 本文档贡献者：[sunnylqm](https://github.com/search?q=sunnylqm%40qq.com+in%3Aemail&amp;type=Users)(100.00%)"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/img/favicon.ico"/><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/solarized-dark.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/codeblocks.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/tabs.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/doccode0325.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/snack.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/scrollSpy.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/css/main.css"/><script src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="https://cdn.jsdelivr.net/gh/easyself/react-native-website@gh-pages/img/header_logo.svg" alt="React Native 中文网"/><h2 class="headerTitleWithLogo">React Native 中文网</h2></a><a href="/versions"><h3>0.60</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/0.60/getting-started" target="_self">文档</a></li><li class=""><a href="/docs/0.60/activityindicator" target="_self">API</a></li><li class=""><a href="//github.com/easyself/react-native-website/issues" target="_blank">讨论</a></li><li class=""><a href="/about" target="_self">关于</a></li><li class=""><a target="_self"></a></li><li class=""><a href="https://github.com/facebook/react-native" target="_self">GitHub</a></li><li class=""><a href="//zh-hans.reactjs.org/" target="_blank">React</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>进阶指南</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">入门基础<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/0.60/getting-started">搭建开发环境</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/tutorial">示例教程：Hello World</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/props">Props（属性）</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/state">State（状态）</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/style">样式</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/height-and-width">高度与宽度</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/flexbox">使用Flexbox布局</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/handling-text-input">处理文本输入</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/handling-touches">处理触摸事件</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/using-a-scrollview">使用滚动视图</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/using-a-listview">使用长列表</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/network">网络</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/sample-application-movies">示例教程：电影列表</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/more-resources">其他参考资源</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">进阶指南<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/0.60/components-and-apis">组件和API</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/platform-specific-code">特定平台代码</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/navigation">使用导航器跳转页面</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/images">图片</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/animations">动画</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/accessibility">无障碍功能</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/improvingux">改进用户体验</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/timers">定时器</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/debugging">调试</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/performance">性能</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/gesture-responder-system">手势响应系统</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/javascript-environment">JavaScript环境</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/direct-manipulation">直接操作</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/colors">颜色</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/integration-with-existing-apps">集成到现有原生应用</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/building-for-apple-tv">为电视和机顶盒制作应用</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/running-on-device">在设备上运行</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/0.60/upgrading">更新</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/native-modules-setup">原生模块配置</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/out-of-tree-platforms">多平台支持</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/building-from-source">从源代码编译React Native</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/publishing-forks">发布自己定制的ReactNative包</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/testing">Testing your Changes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">使用指南(iOS)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/0.60/native-modules-ios">原生模块</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/native-components-ios">原生UI组件</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/linking-libraries-ios">链接原生库</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/running-on-simulator-ios">在iOS模拟器上运行</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/communication-ios">和原生端通信</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/app-extensions">iOS应用扩展</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">使用指南(Android)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/0.60/native-modules-android">原生模块</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/native-components-android">原生UI组件</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/headless-js-android">Headless JS（后台任务）</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/signed-apk-android">打包APK</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/removing-default-permissions">移除不需要的权限</a></li><li class="navListItem"><a class="navItem" href="/docs/0.60/hermes">Using Hermes</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="//easyself.github.com/react-native-website/blob/production/cndocs/upgrading.md" target="_blank" rel="noreferrer noopener">帮助改进此文档</a><h1 id="__docusaurus" class="postHeaderTitle">更新</h1></header><article><div><span><h5><a class="anchor" aria-hidden="true" id="本文档贡献者：sunnylqmhttpsgithubcomsearchqsunnylqm40qqcomin3aemailtypeusers10000"></a><a href="#本文档贡献者：sunnylqmhttpsgithubcomsearchqsunnylqm40qqcomin3aemailtypeusers10000" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>本文档贡献者：<a href="https://github.com/search?q=sunnylqm%40qq.com+in%3Aemail&amp;type=Users">sunnylqm</a>(100.00%)</h5>
<p>时刻将 React Native 更新到最新的版本，可以获得更多 API、视图、开发者工具以及其他一些好东西（译注：官方开发任务繁重，人手紧缺，几乎不会对旧版本提供维护支持，所以即便更新可能带来一些兼容上的变更，但建议开发者还是尽一切可能第一时间更新）。由于一个完整的 React Native 项目是由 Android 项目、iOS 项目和 JavaScript 项目组成的，且都打包在一个 npm 包中，所以升级可能会有一些麻烦。我们会尽量简化这一流程。你可以在项目目录下使用<code>react-native info</code>命令查看当前的版本。以下是目前所需的升级步骤：</p>
<blockquote>
<p>译注：<a href="https://github.com/facebook/react-native/releases">英文更新日志点这里查看</a>，<a href="http://bbs.reactnative.cn/category/1">中文更新日志点这里查看</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="如果你当前的版本大于等于-059："></a><a href="#如果你当前的版本大于等于-059：" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如果你当前的版本大于等于 0.59：</h2>
<h3><a class="anchor" aria-hidden="true" id="upgrade-based-on-git"></a><a href="#upgrade-based-on-git" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Upgrade based on Git</h3>
<p>The <a href="https://github.com/react-native-community/react-native-cli">React Native CLI</a> comes with <code>upgrade</code> command that provides a one-step operation to upgrade the source files with a minimum of conflicts, thanks to the <a href="https://github.com/react-native-community/rn-diff-purge">rn-diff-purge</a> project.</p>
<h4><a class="anchor" aria-hidden="true" id="1-make-sure-your-project-uses-git"></a><a href="#1-make-sure-your-project-uses-git" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Make sure your project uses Git</h4>
<blockquote>
<p>This step applies only to projects that don't use Git. Skip it if yours use it.</p>
</blockquote>
<p>While your project does not have to be handled by the Git versioning system -- you can use Mercurial, SVN, or nothing -- you will still need to <a href="https://git-scm.com/downloads">install Git</a> on your system in order to use <code>react-native upgrade</code>. Git will also need to be available in the <code>PATH</code>. If your project doesn't use Git, initialize it and commit:</p>
<pre><code class="hljs css language-sh">git init
git add .
git commit -m <span class="hljs-string">"upgrade RN"</span>
</code></pre>
<p>After the upgrade is done and conflicts resolved, you can remove the <code>.git</code> directory.</p>
<h4><a class="anchor" aria-hidden="true" id="2-run-the-upgrade-command"></a><a href="#2-run-the-upgrade-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Run the <code>upgrade</code> command</h4>
<p>Run the following command to start the process of upgrading to the latest version:</p>
<pre><code class="hljs css language-sh">react-native upgrade
</code></pre>
<p>You may specify a React Native version by passing an argument, e.g. to upgrade to <code>0.59.0-rc.0</code> run:</p>
<pre><code class="hljs css language-sh">react-native upgrade 0.59.0-rc.0
</code></pre>
<p>The project is upgraded using <code>git apply</code> with 3-way merge. That's why it may happen you'll need to resolve some conflicts.</p>
<h4><a class="anchor" aria-hidden="true" id="3-resolve-the-conflicts"></a><a href="#3-resolve-the-conflicts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Resolve the conflicts</h4>
<p>Conflicted files include delimiters which make very clear where the changes come from. For example:</p>
<pre><code class="hljs"><span class="hljs-number">13</span>B07F951A680F5B00A75B9A <span class="hljs-comment">/* Release */</span> = {
  <span class="hljs-attr">isa</span> = XCBuildConfiguration;
  <span class="hljs-attr">buildSettings</span> = {
    <span class="hljs-attr">ASSETCATALOG_COMPILER_APPICON_NAME</span> = AppIcon;
&lt;&lt;&lt;&lt;&lt;&lt;&lt; ours
    <span class="hljs-attr">CODE_SIGN_IDENTITY</span> = <span class="hljs-string">"iPhone Developer"</span>;
    <span class="hljs-attr">FRAMEWORK_SEARCH_PATHS</span> = (
      <span class="hljs-string">"$(inherited)"</span>,
      <span class="hljs-string">"$(PROJECT_DIR)/HockeySDK.embeddedframework"</span>,
      <span class="hljs-string">"$(PROJECT_DIR)/HockeySDK-iOS/HockeySDK.embeddedframework"</span>,
    );
=======
    <span class="hljs-attr">CURRENT_PROJECT_VERSION</span> = <span class="hljs-number">1</span>;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; theirs
    <span class="hljs-attr">HEADER_SEARCH_PATHS</span> = (
      <span class="hljs-string">"$(inherited)"</span>,
      /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include,
      <span class="hljs-string">"$(SRCROOT)/../node_modules/react-native/React/**"</span>,
      <span class="hljs-string">"$(SRCROOT)/../node_modules/react-native-code-push/ios/CodePush/**"</span>,
    );
</code></pre>
<p>You can think of &quot;ours&quot; as &quot;your team&quot; and &quot;theirs&quot; as &quot;the React Native dev team&quot;.</p>
<h3><a class="anchor" aria-hidden="true" id="如果你当前的版本低于-059，-或者想降级到-059-以下，-或上述升级方法对你无效："></a><a href="#如果你当前的版本低于-059，-或者想降级到-059-以下，-或上述升级方法对你无效：" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如果你当前的版本低于 0.59， 或者想降级到 0.59 以下， 或上述升级方法对你无效：</h3>
<h4><a class="anchor" aria-hidden="true" id="1-更新react-native的-node-依赖包"></a><a href="#1-更新react-native的-node-依赖包" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 更新<code>react-native</code>的 node 依赖包</h4>
<p>请使用<code>npm info react-native</code>命令查看其当前最新版本。</p>
<p>打开项目目录下的<code>package.json</code>文件，然后在<code>dependencies</code>模块下找到<code>react-native</code>，将当前版本号改到你所需要的已经发布的版本，然后在命令行中运行：</p>
<pre><code class="hljs css language-sh">$ npm install
</code></pre>
<blockquote>
<p>注意：react-native 依赖于特定版本的，高于或低于某个范围都不可以。本文无法在这里列出所有 react native 和对应的 react 模块版本要求，只能提醒读者先尝试执行 npm install，然后注意观察安装过程中的报错信息，例如<code>require react@某.某.某版本, but none was installed</code>，然后根据这样的提示，执行<code>npm install react@某.某.某版本</code>。</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="2-升级项目模板文件"></a><a href="#2-升级项目模板文件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 升级项目模板文件</h4>
<p>新版本的 npm 包通常还会包含一些动态生成的文件，这些文件是在运行<code>react-native init</code>创建新项目时生成的，比如 iOS 和 Android 的项目文件。为了使老项目的项目文件也能得到更新（不重新 init），你需要在命令行中运行：</p>
<pre><code class="hljs css language-sh">$ react-native upgrade
</code></pre>
<blockquote>
<p>译注：如果你有修改原生代码，那么在使用 upgrade 升级前，<code>先备份，再覆盖</code>。覆盖完成后，使用比对工具找出差异，将你之前修改的代码逐步搬运到新文件中。</p>
</blockquote>
<p>这一命令会检查最新的项目模板，然后进行如下操作：</p>
<ul>
<li>如果是新添加的文件，则直接创建。</li>
<li>如果文件和当前版本的文件相同，则跳过。</li>
<li>如果文件和当前版本的文件不同，则会提示你一些选项：查看两者的不同，选择保留你的版本或是用新的模板覆盖。你可以按下<code>h</code>键来查看所有可以使用的命令。</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="手动升级"></a><a href="#手动升级" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>手动升级</h2>
<p>升级过程往往会碰到很多问题，尤其涉及到众多第三方时，处理起来尤为费时费力。此时建议可以尝试直接 init 一个新的项目，然后把现有项目的 JS 代码进行手动迁移。</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/0.60/running-on-device"><span class="arrow-prev">← </span><span>在设备上运行</span></a><a class="docs-next button" href="/docs/0.60/native-modules-setup"><span>原生模块配置</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#如果你当前的版本大于等于-059：">如果你当前的版本大于等于 0.59：</a><ul class="toc-headings"><li><a href="#upgrade-based-on-git">Upgrade based on Git</a></li><li><a href="#如果你当前的版本低于-059，-或者想降级到-059-以下，-或上述升级方法对你无效：">如果你当前的版本低于 0.59， 或者想降级到 0.59 以下， 或上述升级方法对你无效：</a></li></ul></li><li><a href="#手动升级">手动升级</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright"><p style="color:inherit">React Native中文网 © 2020 武汉青罗网络科技有限公司</p><p style="color:inherit"><a href="http://beian.miit.gov.cn/">鄂ICP备20002031号</a><img src="https://img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="浙公网安备 33010602005511号"/><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602005511">浙公网安备 33010602005511号</a></p></section><script>
        (function(){
          var c = document.createElement("div");
          c.setAttribute("id", "lv-container");
          c.setAttribute("data-id", "city");
          c.setAttribute("data-uid", "MTAyMC8zODM4NS8xNDkxMw==");
          var container = document.querySelector(".mainContainer")
          container && container.appendChild(c);
        })()
        </script><script src="https://cdn-city.livere.com/js/embed.dist.js"></script></footer></div></body></html>